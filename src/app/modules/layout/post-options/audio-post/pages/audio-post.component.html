
<div class="timed-post">    
    <div class="poll-div-section">
        <div class="wrapper-poll-div-section">
            <div class="">
                <div class="div-for-new-post-poll">
                    <div class="wrapper-new-post-poll">
                        <div class="text-area-for-poll" >
                            <form [formGroup]="feedForm">
                                <div class="time-post-title">
                                    <img class="mr-2" src="assets/images/microphone.png">
                                    Audio Post
                                </div>
                                <div class="form-group position-relative">                                    
                                    <div rows="4" class="w-100 bg-white p-3" formControlName="postTxt"
                                        [ngClass]="{ 'is-invalid': submitted && f.postTxt.errors }"
                                        placeholder="Compose new post" contenteditable="true">
                                        <span class="text-grey">Check out my new Audio Message!</span> 
                                        <div style="display: flex; align-items: center; flex-wrap: wrap">
                                            <div class="select-audio m-2" *ngIf="selectedFiles.length==1">                                                                                 
                                                <img  src="{{selectedFiles[0]}}" style="cursor: pointer;">
                                                <div class="cancel-btn-i">
                                                    <a (click)="removeAttachment()" style="cursor: pointer;"><span
                                                            class="iconify" data-icon="material-symbols:cancel"></span></a>
                                                </div> 
                                            </div>
                                            <div  class="audio-content" style="display: flex; align-items: center;">
                                                <div>                                                                                                                                 
                                                    <button *ngIf="!isRecording" class="select-audio mr-2 attach-audio" (click)="startRecording()">
                                                        <img src="assets/images/mic.png"> Record Audio
                                                    </button>                                  
                                                    <button *ngIf="isRecording" class="select-audio mr-2" (click)="stopRecording()">
                                                        <img src="assets/images/mic.png"> Stop Record
                                                    </button>                                  
                                                </div> 
                                                <div class="select-audio attach-audio" (click)="openFileSelector('addVideo')">                                                              
                                                    <img src="assets/images/attach.png">Attach Audio                                                    
                                                    <input id="addAudio" type="file" class="form-control"
                                                        (change)="selectFile($event, 'addAudio')" style="display:none" accept="audio/*"
                                                        capture>                                    
                                                </div> 
                                            </div>                                            
                                        </div>                                                                                 

                                    </div>
                                    <div *ngIf="submitted && f.postTxt.errors" class="invalid-feedback">
                                        <div *ngIf="f.postTxt.errors.required" style="color:red;">Post text is required
                                        </div>
                                    </div>
    
                                </div>   
                                <div class="right-side-button text-right" *ngIf="!retrievedGroupDetails">
                                    <a href="javascript:void(0)" class="font-14 font-medium color-blue margin-l-r-a">Post
                                        Later</a>
                                    <button type="button" (click)="postFeed()">Post</button>
                                </div>
                                <div class="right-side-button text-right" *ngIf="retrievedGroupDetails">
                                    <a href="javascript:void(0)" class="font-14 font-medium color-blue margin-l-r-a">Post
                                        Later</a>
                                    <button type="button" (click)="postGroupFeed()">Post</button>
                                </div>                                                                
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>